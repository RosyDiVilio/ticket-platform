<!DOCTYPE html>
<html lang="en">
<head th:insert="~{fragments/fragments :: head}">
  
</head>
<body>
	<header th:insert="~{fragments/navbar :: navbar(create)}"></header>
	
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-6">
				
				<form 
				   id="ticket-form"
				   th:object="${ticket}"
				   th:action="@{/tickets/create}"
				   method="POST">
					
				    <h2 class="my-4 text-center">Richiedi Ticket</h2>
					
				    <div class="mb-4">
				      <label for="title" class="form-label fw-semibold">Titolo</label>
				      <input type="text" class="form-control" id="title" placeholder="Inserisci titolo ticket" th:field="*{title}" th:errorClass="is-invalid">
					  
					  <div th:if="${#fields.hasErrors('title')}" class="invalid-feedback">
					     <ul>
					        <li th:each="err : ${#fields.errors('title')}" th:text="${err}"></li>
					     </ul>
					  </div>

				    </div>
				    <div class="mb-4">
				      <label for="description" class="form-label fw-semibold">Descrivi il tuo problema</label>
				      <input type="text" class="form-control" id="description" th:field="*{description}" th:errorClass="is-invalid">
					  
					  <div th:if="${#fields.hasErrors('description')}" class="invalid-feedback">
					     <ul>
					        <li th:each="err : ${#fields.errors('description')}" th:text="${err}"></li>
					     </ul>
					  </div>
					  
				    </div>
					
					<div class="input-group mb-4">
					   <label class="input-group-text fw-semibold" th:for="|category_{$category.id}|">Categoria:</label>
					   <select class="form-select" th:id="|category_{$category.id}|" th:field="${ticket.categories}">
					      <th:block th:each="category : ${categories}">
						     <option th:value="${category.id}" th:text="${category.name}"></option>
					      </th:block> 	
					   </select>						   
					</div> 

					<div class="input-group mb-4">
					   <label class="input-group-text fw-semibold" for="user">Operatore:</label>
					   <select class="form-select" th:field="*{user}">
						<th:block th:each="user : ${users}">
							 <option th:value="${user.id}" th:text="${user.username}"></option>
						</th:block>
					   </select>						   
					</div> 
				
					<div class="input-group mb-4">
					   <label class="input-group-text fw-semibold" for="inputGroupSelect01">Stato:</label>
					   <select class="form-select" id="status" th:field="*{status}" th:errorClass="is-invalid">
						 <option value="da fare">Da Fare</option>
					   </select>
					   
					   <div th:if="${#fields.hasErrors('status')}" class="invalid-feedback">
					   	  <ul>
					   		<li th:each="err : ${#fields.errors('status')}" th:text="${err}"></li>
					   	  </ul>
					   </div>
					   
					</div> 
					
					<div class="d-flex justify-content-between mt-4">
					   <input type="reset" class="btn btn-warning mb-4" value="Resetta">
					   <input type="submit" class="btn btn-primary mb-4" value="Apri Ticket">
				    </div>
					
				</form>
			</div>
        </div>
    </div>
	
	<th:block th:replace="~{fragments/fragments :: scripts}"></th:block>
</body>
</html>