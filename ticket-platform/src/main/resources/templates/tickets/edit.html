<!DOCTYPE html>
<html lang="en">
<head th:insert="~{fragments/fragments :: head}">
  
</head>
<body>
	<header th:insert="~{fragments/navbar :: navbar(edit)}"></header>
	
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-6">
				
				<form 
				   id="ticket-form"
				   th:object="${ticket}"
				   th:action="@{/tickets/edit/{id}(id=${ticket.id})}"
				   method="POST">
					
				    <h2 class="my-4 text-center">Modifica Ticket "[[ ${ticket.title} ]]"</h2>
					
				    <div class="mb-4">
				      <label for="title" class="form-label fw-semibold">Titolo</label>
				      <input type="text" class="form-control" id="title" placeholder="Inserisci titolo ticket" th:field="*{title}" th:errorClass="is-invalid">
					  
					  <div th:if="${#fields.hasErrors('title')}" class="invalid-feedback">
					     <ul>
					        <li th:each="err : ${#fields.errors('title')}" th:text="${err}"></li>
					     </ul>
					  </div>

				    </div>
				    <div class="mb-4">
				      <label for="description" class="form-label fw-semibold">Descrivi il tuo problema</label>
				      <input type="text" class="form-control" id="description" th:field="*{description}" th:errorClass="is-invalid">
					  
					  <div th:if="${#fields.hasErrors('description')}" class="invalid-feedback">
					     <ul>
					        <li th:each="err : ${#fields.errors('description')}" th:text="${err}"></li>
					     </ul>
					  </div>
					  
				    </div>
					
					<div class="input-group mb-4">
					   <label class="input-group-text fw-semibold" th:for="|category_{$category.id}|">Categoria:</label>
						  <select class="form-select" th:id="|category_{$category.id}|" th:field="${ticket.categories}">
							 <th:block th:each="category : ${categories}">
								<option th:value="${category.id}" th:text="${category.name}"></option>
							 </th:block> 	
					      </select>						   
					</div> 
					
					<div class="input-group mb-4">
						<label class="input-group-text fw-semibold" for="user">Operatore:</label>
						<select class="form-select" th:field="*{user}">
								<option th:value="${user.id}" th:text="${user.username}"></option>
						</select>
					</div>
					
					<div class="input-group mb-4">
					   <label class="input-group-text fw-semibold" for="inputGroupSelect01">Stato:</label>
					   <select class="form-select" id="status" th:field="*{status}" th:errorClass="is-invalid">
						 <option value="da fare">Da Fare</option>
						 <option value="in corso">In Corso</option>
						 <option value="completato">Completato</option>
					   </select>
										   
					   <div th:if="${#fields.hasErrors('status')}" class="invalid-feedback">
						  <ul>
							 <li th:each="err : ${#fields.errors('status')}" th:text="${err}"></li>
						  </ul>
					   </div>
										   
					</div> 
					
					<div class="d-flex justify-content-between mb-4">
					   <a th:href="@{/tickets}" class="btn btn-warning">Indietro</a>
					   <input type="submit" class="btn btn-primary" value="Modifica Ticket">
				    </div>
					
				</form>
			</div>
        </div>
    </div>
	
	<th:block th:replace="~{fragments/fragments :: scripts}"></th:block>
</body>
</html>